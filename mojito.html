<!DOCTYPE html>
<html lang="en">
<head>
<title>xAPI Cohort Demo</title>
<link href="video-js-6.1.0/video-js.css" rel="stylesheet">
<script src="video-js-6.1.0/ie8/videojs-ie8.min.js"></script>
<script src="video-js-6.1.0/video.js"></script>
<script type="text/javascript" src="xAPIWrapper-1.10.4/src/xapiwrapper.js"></script>
<script type="text/javascript" src="xAPIWrapper-1.10.4/lib/cryptojs_v3.1.2.js"></script>
<script type="text/javascript" src="xapi-videojs.js"></script>
</head>

<body prefix="dcterms: http://purl.org/dc/terms/">
<div id="vidtitle" property="dcterms:title" content="How Do You Make A Mojito?"></div>
<div id="viddesc" property="dcterms:description" content="A recipe and tutorial on how to make a Mojito cocktail drink."></div>

<video  id="vid1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264" data-setup="{}">
  <source src="https://lrs.io/public/videos/mixology/mojito.mp4" type="video/mp4">
  <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
</video>
<script type="text/javascript">
        var actorEmail = localStorage.actorEmail;
        var actorName = localStorage.actorName;
        console.log('local storage actor name from page:' + localStorage.actorName);
        console.log('local storage actor email from page:' + localStorage.actorEmail);    
    
    // ADL LRS Configuration - Basic Auth for demo purposes  
    if(ADL.XAPIWrapper.lrs.auth == undefined) {
        var conf = {
           "endpoint" : "https://videocohort.lrs.io:443/xapi/",
           "auth" : "Basic " + toBase64('videocohort:1827364vodeo345'),
           "actor" : '{"mbox": "mailto:'+ actorEmail +'","name": " '+ actorName +' ","objectType": "Agent"}'
            //"actor" : '{"mbox": "mailto:videocohort@veracity.it","name": "Team Video","objectType": "Agent"}'
        };
        ADL.XAPIWrapper.changeConfig(conf);       
    }
    // put into variables - title and description from the metadata DIV above the video element 
    var activityTitle = document.getElementById('vidtitle').getAttribute('content');
    var activityDesc = document.getElementById('viddesc').getAttribute('content');  
    
    ADL.XAPIVideoJS("vid1");
    
</script>
</body>
</html>
